.column
  %dl.registration
    / RSVPs
    - if logged_in? && current_user.rsvp_for(event)
      %dt
        %span.button.closed Attend
      %dd
        %p
          %strong You&rsquo;re attending!
          %a{:href => event_rsvp_pike_path(event)} Changed your mind?
    - elsif event.full?
      %dt
        %span.button.closed Too late
      %dd
        %p
          %strong Want to attend?
          Sorry, all full up!
    - elsif !logged_in?
      %dt
        = link_to "Attend", new_session_path(:return_to => event_rsvp_path(event)), :class => "button rsvp"
      %dd
        %p
          %strong Want to attend?
          There&rsquo;s still spots
    - else
      %dt
        - form_tag event_rsvp_path(event), :class => "button rsvp" do |form|
          = submit_tag 'Attend'
      %dd
        %p
          %strong Want to attend?
          = "Only #{pluralize(event.rsvps_left, "spot")}, get on it."

  / Proposals
  / TODO: If they've submitted a proposal
  %dl.registration
    - if logged_in? && (proposal = current_user.proposal_for(event))
      %dt
        %span.button.closed Present
      %dd
        %p
          %strong Proposal submitted!
          %a{:href => event_presentation_proposal_path(event)} Edit your proposal
    - elsif event.not.proposals_open?
      %dt
        %span.button.closed Too late
      %dd
        %p
          %strong Want to present?
          Sorry, no more are being accepted.
    - elsif !logged_in?
      %dt
        = link_to "Present", new_session_path(:return_to => event_presentation_proposal_path(event)), :class => "button rsvp"
      %dd
        %p
          %strong Want to present?
          There&rsquo;s still time.
    - else
      %dt
        = link_to "Present", event_presentation_proposal_path(event), :class => "button rsvp"
      %dd
        %p
          %strong Want to present?
          Submit a proposal!
